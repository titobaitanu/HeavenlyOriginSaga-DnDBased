# ============================================================
# SYSTEM MODULE — KARMA & FATE INTERACTION SYSTEM
# File: system_modules/system/karma_system.yaml
# Secure Public Version (v3.2)
# ============================================================
# Maintainer: Heavenal Control Node
# License: Dual (MIT + Heavenal Law Open-Collab)
# ============================================================

meta:
  module_id: "SYS-KARMA"
  title: "Karma & Fate Interaction System"
  version: 3.2-secure
  author: "Tito Baitanu"
  maintainer: "Heavenal Control Node"
  status: verified
  linked_codex:
    - "codex_XIX_technique_system.yaml"
    - "codex_XX_realm_architecture.yaml"
    - "codex_XXIV_battle_law.yaml"
    - "codex_npc_faction.yaml"
  checksum: "SYS-KARMA-SHA-7B19F"
  last_updated: "2025-11-10"

---

description:
  summary: >
    The Karma System governs moral causality, divine resonance, and the flow of
    spiritual consequences through all realms. Every action performed by mortals,
    immortals, or divine entities leaves behind karmic echoes that influence
    fate, tribulation, and ascension outcomes.
  principle: >
    Karma is not good or evil—it is the reflection of Law balance. Those who align
    with Heavenal Law accrue Pure Karma, while those who defy it gather Corrupted Karma.

---

karma_scale:
  range:
    min: -10000
    max: +10000
  interpretation:
    - "≤ -8000: Abyssal Cursed (Targeted by Heavenal Flame)"
    - "-5000 to -7999: Major Corruption (Heavenal Watch Triggered)"
    - "-1000 to -4999: Negative Karma — Susceptible to Tribulation Amplification"
    - "-1 to +1: Neutral Balance — Ordinary Soul"
    - "+1000 to +4999: Positive Karma — Slightly Favored by Heaven"
    - "+5000 to +7999: Great Merit — Increased Ascension Success"
    - "≥ +8000: Heavenal Blessed — Immune to Lesser Tribulations"

---

karma_sources:
  positive_actions:
    - "Saving lives, halting war, or preserving balance."
    - "Cultivating harmony without greed or dominance."
    - "Completing Heavenal Quests or Law-Resonant deeds."
    - "Offering spiritual resources to restore equilibrium."
  negative_actions:
    - "Killing for pleasure or gain."
    - "Using forbidden laws or void corruption."
    - "Destroying souls or temples of balance."
    - "Violating realm seals without Heavenal authorization."
  neutral_actions:
    - "Trading, training, or fulfilling survival needs."
    - "Acting under lawful orders without malice intent."

---

mechanics:
  karma_accumulation:
    base_formula: "ΔK = (Action_Value × Law_Resonance) × Intent_Modifier"
    notes: >
      - Action_Value: Magnitude of effect (1–1000)
      - Law_Resonance: Alignment with Heavenal Law (0.5–2.0)
      - Intent_Modifier: +1 for pure intent, -1 for selfish or malicious acts.
  karmic_decay:
    rate: "0.05% per Heavenal day"
    trigger: "Inactive souls or sealed karma pools slowly decay toward balance."
  karmic_surge:
    condition: "Mass death events, world imbalance, or large-scale sin/virtue."
    effect: "Triggers Tribulation anomaly or Divine Intervention check."

---

interaction_with_systems:
  battle_law_limitation:
    effect: >
      High karma reduces tribulation backlash.
      Negative karma amplifies damage reflection and critical backlash.
  ascension_trial:
    effect: >
      Karma directly modifies success probability:
      Success_Chance = Base × (1 + Karma/10000)
  heavenal_shop:
    modifiers:
      positive_karma_discount: "-5% to -30%"
      negative_karma_penalty: "+10% to +50%"
  npc_faction:
    influence: >
      Faction attitude toward player adjusts with karma level.
      Holy/Heavenly factions favor positive karma;
      Demonic/Evil factions reward negative karma alignment.

---

divine_interference_rules:
  thresholds:
    - "+5000 triggers Guardian Descent Blessing"
    - "-5000 triggers Heavenal Inquisition Mark"
  blessings:
    - name: "Law of Mercy"
      effect: "Negates one fatal tribulation strike per era."
    - name: "Law of Balance"
      effect: "Converts -1000 karma into neutral if aligned with Heavenal task."
  punishments:
    - name: "Heavenal Brand"
      effect: "Seals Qi circulation until redemption quest completed."
    - name: "Karmic Burn"
      effect: "Gradual soul decay, causes HP/MP loss over time."

---

karma_visualization:
  aura_color:
    - "+8000 → Golden Radiance"
    - "+4000 → White-Gold"
    - "0 → Faint Blue"
    - "-2000 → Crimson Veins"
    - "-8000 → Abyssal Black Flame"
  visual_indicators:
    - "Characters with extreme karma emit Law Echoes visible to Immortal-level beings."
    - "Heavenal Inspectors can scan karmic trails using Heavenal Mirror."

---

integration_hooks:
  - "Event Engine (world_event_engine.yaml): Karma triggers global shifts in weather, qi density, or chaos storms."
  - "Battle System (battle_law_limitation.yaml): Applies Karma Reflection Damage."
  - "Ascension Engine (ascension_trial.yaml): Alters tribulation difficulty scaling."
  - "Economy (heavenal_shop.yaml): Modifies shop price modifiers."
  - "Faction/NPC (npc_faction.yaml): Influences diplomacy and hostility triggers."

---

gm_controls:
  commands:
    - "/karma check <player>" : "Display karma value and state."
    - "/karma adjust <player> <amount>" : "Modify player karma manually."
    - "/karma reset <player>" : "Restore neutral karma (0)."
    - "/karma bless <player>" : "Apply Law of Mercy."
    - "/karma curse <player>" : "Apply Karmic Burn."
  auto_logging: true
  log_channel: "Heavenal_Log_Archive"
  sync_interval: "Every 2 Heavenal Days"

---

verification:
  maintained_by: "Heavenal Control Node"
  validated_on: "2025-11-10"
  sync_with: "manifest.yaml v3.2-secure"
  integrity_check: verified
  checksum: "SYS-KARMA-SHA-7B19F"
  sign_key: "HCLN-KARMA-SYSTEM-SECURE"
