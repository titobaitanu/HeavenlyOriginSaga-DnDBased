# ============================================================
# SYSTEM MODULE — BATTLE LAW LIMITATION SYSTEM
# Repository Path: system_modules/system/battle_law_limitation.yaml
# Version: v3.2-secure
# Maintainer: Heavenal Control Node
# License: Dual (MIT + Heavenal Law Open-Collab)
# ============================================================

meta:
  module_id: "SYS-BTL-LAW"
  title: "Heavenal Battle Law Limitation & Resonance Module"
  version: 3.2-secure
  author: "Tito Baitanu"
  maintainer: "Heavenal Control Node"
  category: "System Module"
  linked_codex:
    - codex_XIX_technique_system.yaml
    - codex_XXIV_battle_law.yaml
    - codex_synchronization.yaml
  linked_systems:
    - system/inventory_module.yaml
    - system/reward_loot_tier.yaml
  last_updated: "2025-11-10"

---

description:
  purpose: >
    Modul ini mengatur pembatasan penggunaan teknik dan hukum selama pertempuran,
    berdasarkan perbedaan realm, kapasitas jiwa, dan frekuensi hukum (Law Resonance).
    Dirancang agar tidak terjadi kerusakan dunia akibat ketidakseimbangan energi kosmik.
  principle: >
    “Langit bukan menghukum kekuatan — Langit menolak ketidakseimbangan.”

---

law_efficiency_table:
  description: >
    Efisiensi teknik ditentukan oleh kesesuaian antara tingkat realm pengguna dan
    level teknik yang digunakan. Efisiensi berkurang seiring jarak antara realm
    pengguna dan tingkat hukum teknik.
  table:
    - realm_gap: "0 (sesuai realm)"
      efficiency: "100%"
      effect: "Teknik bekerja sempurna"
    - realm_gap: "1 tingkat di bawah"
      efficiency: "80%"
      effect: "Sedikit delay / konsumsi Qi meningkat"
    - realm_gap: "2 tingkat di bawah"
      efficiency: "60%"
      effect: "Hilang stabilitas energi; efek berkurang"
    - realm_gap: "3 tingkat di bawah"
      efficiency: "40%"
      effect: "Teknik tidak stabil; risiko backlash"
    - realm_gap: "4 tingkat di bawah"
      efficiency: "25%"
      effect: "Distorsi hukum berat; potensi Thunder Tribulation"
    - realm_gap: "≥5 tingkat di bawah"
      efficiency: "<10%"
      effect: "Reaksi Langit; Heavenal Rejection aktif"

---

heavenal_rejection_mechanics:
  triggers:
    - "Penggunaan teknik Divine / Immortal oleh pengguna Mortal"
    - "Law Resonance melebihi batas 7.0 tanpa Law Compression"
    - "Ketidakseimbangan antara Essence dan Law di atas 40%"
  effects:
    - mild: "Qi Fluctuation — kehilangan 20% MP/Essence"
    - moderate: "Soul Crack — kehilangan 1 level teknik acak"
    - severe: "Heavenal Burn — kehilangan 1 tingkat realm"
    - fatal: "Existence Erasure — pengguna dihapus dari realitas"
  mitigation:
    - "Gunakan Law Compression untuk menurunkan frekuensi teknik"
    - "Gunakan Pill of Resonance atau Heavenal Stabilizer Herb"
    - "Law-Aligned Armor dapat menyerap sebagian backlash"

---

law_resonance_system:
  formula: "Resonance = (Law Comprehension × Qi Purity × Soul Sync Rate) / Realm Cap"
  interpretation:
    - "<1.0 → Tidak stabil, teknik gagal"
    - "1.0–2.5 → Stabil, teknik berhasil"
    - "2.5–4.0 → High resonance, efek meningkat"
    - ">4.0 → Overload, resiko penolakan Langit meningkat"
  resonance_modes:
    - "Stable Mode — digunakan untuk duel antar realm setara"
    - "Overdrive Mode — meningkatkan damage 150%, tapi menurunkan stabilitas 40%"
    - "Void Resonance Mode — hanya dapat diakses oleh pengguna dengan Law of Void (Forbidden)"

---

battlefield_modifiers:
  world_interference:
    - "Realm Distortion: efek hukum menurun 20% di dunia mortal"
    - "Immortal Realm Amplification: teknik hukum meningkat 30%"
    - "Void Interference: efek hukum berubah acak setiap 3 ronde"
    - "Chaos Pulse: menghapus semua buff/debuff dalam radius 100m"
  environmental_affinities:
    - "Glacial Domain: buff elemen air & es +25%"
    - "Crimson Domain: buff elemen api +30%"
    - "Obsidian Domain: buff bayangan +35%, tapi -20% defense"
    - "Celestial Domain: buff hukum langit +40%, tapi trigger Thunder Tribulation jika disalahgunakan"

---

buff_debuff_visual_system:
  visual_effects:
    buff:
      - name: "Qi Radiance"
        color: "Azure-Gold"
        effect: "Kekuatan meningkat sementara"
      - name: "Essence Halo"
        color: "Silver-White"
        effect: "Menstabilkan resonance & memulihkan 10% MP per ronde"
      - name: "Divine Lumina"
        color: "Golden-White"
        effect: "Law amplification +25% (Divine path only)"
    debuff:
      - name: "Law Fracture"
        color: "Violet-Black"
        effect: "Menurunkan law efficiency 40%"
      - name: "Karmic Corrosion"
        color: "Dark Crimson"
        effect: "Menguras karma positif per ronde"
      - name: "Void Sickness"
        color: "Pale Grey"
        effect: "Resonance membalik; teknik tidak dapat dikendalikan"
  display_engine: "Heavenal FX Engine v2.0"

---

combat_resolution:
  law_conflict:
    mechanics:
      - "Setiap benturan antar teknik di atas Law Cap 3.0 menimbulkan Law Ripple."
      - "Ripple dapat merusak lingkungan atau mengubah domain hukum lokal."
      - "Jika Ripple > Threshold (5.0), otomatis muncul Heavenal Mirror untuk intervensi."
    resolution_priority:
      - "Higher Law Resonance prevails"
      - "Equal resonance → Soul Power determines outcome"
      - "If equal → environmental law decides victor"
  post_battle_effects:
    - "Karma adjusted by intent and collateral damage"
    - "Overused laws may cause local distortion (temporary debuff zone)"
    - "GCEB monitors large-scale resonance spikes"

---

integration:
  linked_to:
    - "event/void_invasion.yaml"
    - "event/divine_intervention.yaml"
    - "codex_conflict_matrix.yaml"
  event_hooks:
    - "Resonance Overload → triggers Thunder Tribulation event"
    - "Void Mode Activation → triggers Abyssal Rift anomaly"
    - "Heavenal Judgment → activates GCEB Arbiter sequence"
  update_interval: "Every Heavenal Battle Session"

---

verification:
  maintained_by: "Heavenal Control Node"
  validated_on: "2025-11-10"
  sync_with: "manifest.yaml v3.2-secure"
  integrity_check: verified
  checksum: "SYS-BTL-SHA-7F31C9"
  sign_key: "HCLN-BATTLE-LAW-SYS-SECURE"
